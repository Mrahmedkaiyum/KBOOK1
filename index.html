<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>KBOOK - Secure Access</title>
    <style>
        :root { --fb-blue: #075e54; --bg-gray: #f0f2f5; }
        body { font-family: 'Segoe UI', Arial, sans-serif; margin: 0; background: var(--bg-gray); display: flex; justify-content: center; height: 100vh; overflow: hidden; }
        #app-container { width: 100%; max-width: 500px; background: white; position: relative; display: flex; flex-direction: column; box-shadow: 0 0 20px rgba(0,0,0,0.1); }

        /* Splash Animation */
        #splash { position: absolute; inset: 0; background: white; z-index: 5000; display: flex; flex-direction: column; align-items: center; justify-content: center; animation: fadeOut 2.5s forwards; }
        .logo-box { width: 100px; height: 100px; background: var(--fb-blue); border-radius: 20px; display: flex; align-items: center; justify-content: center; color: white; font-size: 40px; font-weight: bold; animation: zoom 1.2s ease-out; }
        @keyframes zoom { from { transform: scale(0); rotate: -45deg; } to { transform: scale(1); rotate: 0deg; } }
        @keyframes fadeOut { 85% { opacity: 1; } 100% { opacity: 0; visibility: hidden; } }

        /* Auth Form */
        .auth-card { padding: 25px; display: flex; flex-direction: column; gap: 10px; text-align: center; height: 100%; justify-content: center; }
        input { padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 15px; outline: none; background: #f9f9f9; }
        .btn-main { background: var(--fb-blue); color: white; padding: 14px; border: none; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 5px; }
        .backup-info { font-size: 11px; color: #d32f2f; margin-bottom: 5px; text-align: left; }
        
        #forgot-section { display: none; background: #fff3e0; padding: 15px; border-radius: 8px; border: 1px solid #ffb74d; margin-top: 10px; }
    </style>
</head>
<body>

<div id="app-container">
    
    <div id="splash">
        <div class="logo-box">K</div>
        <h2 style="color: var(--fb-blue); margin-top: 15px;">KBOOK</h2>
    </div>

    <div class="auth-card" id="auth-page">
        <h1 style="color: var(--fb-blue); margin-bottom: 0;">KBOOK</h1>
        <p id="form-subtitle">লগইন করুন</p>

        <input type="email" id="email" placeholder="ইমেইল এড্রেস">
        <input type="number" id="phone" placeholder="মোবাইল নম্বর">
        <input type="password" id="pass" placeholder="মেইন পাসওয়ার্ড (৬+ সংখ্যা)">
        
        <div id="reg-extra" style="display: none; flex-direction: column; gap: 10px;">
            <p class="backup-info">⚠️ একটি ব্যাকআপ পাসওয়ার্ড দিন (পাসওয়ার্ড ভুলে গেলে এটি কাজে লাগবে)</p>
            <input type="text" id="backup-pass" placeholder="ব্যাকআপ পাসওয়ার্ড (সহজ কিছু)">
        </div>

        <button class="btn-main" id="action-btn" onclick="handleAuth()">Login</button>
        
        <p onclick="toggleMode()" id="toggle-link" style="color: #1877f2; cursor: pointer; font-size: 14px; margin-top: 10px;">নতুন অ্যাকাউন্ট খুলুন</p>
        <p onclick="showForgot()" id="forgot-link" style="color: #666; cursor: pointer; font-size: 13px;">পাসওয়ার্ড ভুলে গেছেন?</p>

        <div id="forgot-section">
            <p style="font-size: 14px; margin-bottom: 8px;">আপনার নম্বর ও ব্যাকআপ পাসওয়ার্ড দিন</p>
            <input type="number" id="f-phone" placeholder="রেজিস্ট্রেশন নম্বর" style="width: 90%; margin-bottom: 5px;">
            <input type="text" id="f-backup" placeholder="ব্যাকআপ পাসওয়ার্ড দিন" style="width: 90%;">
            <button class="btn-main" style="width: 95%; background: #ef6c00;" onclick="recoverAccount()">Recover Now</button>
        </div>
    </div>

    <div id="main-app" style="display: none; height: 100%; flex-direction: column;">
        <div style="background: var(--fb-blue); color: white; padding: 15px; font-weight: bold; display: flex; justify-content: space-between;">
            <span>KBOOK Home</span>
            <span onclick="location.reload()" style="cursor: pointer;">Logout</span>
        </div>
        <div style="flex: 1; padding: 20px; text-align: center;">
            <h3 id="welcome-msg">স্বাগতম!</h3>
            <p>আপনার অ্যাকাউন্ট সফলভাবে ভেরিফাই হয়েছে।</p>
        </div>
    </div>
</div>

<script>
    let isLogin = true;

    function toggleMode() {
        isLogin = !isLogin;
        document.getElementById('form-subtitle').innerText = isLogin ? "লগইন করুন" : "রেজিস্ট্রেশন করুন";
        document.getElementById('action-btn').innerText = isLogin ? "Login" : "Create Account";
        document.getElementById('reg-extra').style.display = isLogin ? "none" : "flex";
        document.getElementById('forgot-section').style.display = "none";
    }

    function showForgot() {
        document.getElementById('forgot-section').style.display = "block";
    }

    function handleAuth() {
        const email = document.getElementById('email').value.trim();
        const phone = document.getElementById('phone').value.trim();
        const pass = document.getElementById('pass').value.trim();
        let db = JSON.parse(localStorage.getItem('kbook_users')) || [];

        if (isLogin) {
            const user = db.find(u => u.email === email && u.pass === pass);
            if (user) {
                enterApp(user.email);
            } else {
                alert("তথ্য ভুল! মেইন পাসওয়ার্ড মনে না থাকলে 'Recover' অপশন ব্যবহার করুন।");
            }
        } else {
            const bPass = document.getElementById('backup-pass').value.trim();
            if (!email || !phone || !pass || !bPass) return alert("সব ঘর পূরণ করুন!");
            if (pass.length < 6) return alert("মেইন পাসওয়ার্ড অন্তত ৬ সংখ্যার হতে হবে!");
            
            if (db.find(u => u.email === email)) return alert("এই ইমেইল দিয়ে অ্যাকাউন্ট আছে!");

            db.push({ email, phone, pass, backup: bPass });
            localStorage.setItem('kbook_users', JSON.stringify(db));
            alert("অ্যাকাউন্ট তৈরি সফল! এখন লগইন করুন।");
            toggleMode();
        }
    }

    function recoverAccount() {
        const phone = document.getElementById('f-phone').value.trim();
        const backupInput = document.getElementById('f-backup').value.trim();
        let db = JSON.parse(localStorage.getItem('kbook_users')) || [];

        const user = db.find(u => u.phone === phone && u.backup === backupInput);
        
        if (user) {
            alert("ভেরিফিকেশন সফল! আপনার মেইন পাসওয়ার্ড ছিল: " + user.pass);
            enterApp(user.email);
        } else {
            alert("নম্বর বা ব্যাকআপ পাসওয়ার্ড মেলেনি! সাহায্য লাগলে অ্যাডমিনের সাথে যোগাযোগ করুন।");
        }
    }

    function enterApp(userEmail) {
        document.getElementById('auth-page').style.display = 'none';
        document.getElementById('main-app').style.display = 'flex';
        document.getElementById('welcome-msg').innerText = "স্বাগতম, " + userEmail.split('@')[0].toUpperCase();
    }
</script>

</body>
</html>
